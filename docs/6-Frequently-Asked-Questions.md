**常见问题解答**

**我应该使用哪个操作系统？**

FreeRADIUS 协议可以在所有 Unix 系统上运行，建议选择熟悉的操作系统。Windows 目前不支持 FreeRADIUS。

**服务器的 CPU/RAM/磁盘空间要求是多少？**

FreeRADIUS 服务器的要求很低。一个基本的 FreeRADIUS 安装使用 8MB 的 RAM、不到 100MB 的磁盘空间以及最低的 CPU 能力。一个互联网服务提供商（ISP）如果有 10,000 或更少的用户，使用当时市场上任何商品化的系统都不会遇到问题。如果 ISP 有超过 10,000 个用户，则总体系统设计变得比单台服务器的规格更加重要。

**服务器没有启动。我该怎么办？**

执行以下操作：

- 使用 sudo 切换到 root 用户上下文。
  如果服务器启动正常，则问题是服务器正在以非特权用户身份运行。
  
- 以该用户身份登录，并以调试模式运行。任何错误或警告将显示在监控器上。

**服务器发送了一个 Access-Reject 消息，而用户应该被接受。为什么？**

执行以下操作，收集足够的信息来诊断问题：

- 以调试模式运行服务器，并观察用户登录时发生了什么。
  
- 如果控制套接字已配置，您还可以运行 `raddebug -u USERNAME` 来收集来自运行中服务器的相同信息。

**服务器发送了 Access-Accept 和一些属性，但用户没有获得正确的服务（或被拒绝）。为什么？**

检查 NAS 日志，以确定 NAS 为什么忽略服务器的指示。NAS 文档应该标明它需要提供某些服务所需的属性。这些属性有时会以不寻常的格式出现，因此要查阅 NAS 文档。

**会计日志没有包含我想要查看的信息。我如何让服务器记录正确的信息？**

配置 NAS 以发送正确的信息。FreeRADIUS 服务器只能记录它接收到的信息。如果信息不在会计数据包中，那么它就没有被 NAS 发送。
**如何在认证后限制用户的网络访问？**

配置 FreeRADIUS 发送适当的过滤规则到 NAS。NAS 执行这些认证后规则。请查阅 NAS 文档，了解属性的名称和格式。确保这些属性没有接受的标准，并确保咨询 NAS 文档。

**如何为用户配置强制门户？**

请查阅 NAS 文档，了解如何配置强制门户。每个 NAS 需要不同的操作。

另一个选项是使用开源强制门户解决方案。FreeRADIUS 仅提供对认证请求的“是”或“否”响应。FreeRADIUS 不充当防火墙来阻止网络访问，并且不支持 HTTP。

**如何在用户登录后断开用户连接？**

查看 NAS 文档。如果特定的 NAS 支持 Disconnect-Request，可以使用 `radclient` 发送该数据包。

如果 NAS 不支持 Disconnect-Request，请使用该特定 NAS 的适当操作。例如，一些 NAS 支持 SNMP 写入，而其他 NAS 需要管理员登录到 NAS 控制台并手动重置端口。

**服务器日志中有许多关于请求超时或阻塞子进程的消息。我该如何修复？**

这些阻塞通常发生在服务器使用数据库进行认证时，而数据库处于非活动状态或运行缓慢。为解决此问题，增加数据库的响应速度。粗略的经验法则是，如果查询时间超过一秒，则数据库可能存在严重问题。可能的解决方案包括：

- 添加索引
- 增加更多 RAM
- 确保其他系统在 FreeRADIUS 使用数据库时不会同时访问数据库

**服务器每秒能处理多少次认证？**

这在很大程度上取决于主机系统的 CPU 性能、数据库类型以及认证协议。通常，一个新服务器上所有用户的内存和 PAP 认证应该能够每秒进行数万个认证。

使用 PEAP 时，系统的 CPU 可能会成为瓶颈，每秒只能处理数千次认证。

**服务器每秒能处理多少个会计数据包？**

主机系统的 CPU 性能和数据库决定了服务器每秒能处理多少个会计数据包。如果数据库的写入速度有限，FreeRADIUS 的会计请求也仅限于数据库的写入速度。
**如何最大化我的系统性能？**

确保您的系统使用高性能数据库。这一措施将对您的系统性能产生最大影响。

**服务器给出了 WARNING / ERROR 消息。我该怎么办？**

阅读警告或错误消息并按照提示操作。如果问题仍然存在，请在 FreeRADIUS 用户邮件列表上寻求帮助，网址是：freeradius-users@lists.freeradius.org。

**服务器提示共享密钥不正确，但我确定它已经正确输入。如何解决？**

为解决此问题，请执行以下步骤：

1. 重新输入 NAS 和 RADIUS 服务器上的共享密钥。
2. 以调试模式运行服务器，确保它使用的是正确的共享密钥。

在某些情况下，该消息可能表示 NAS 网络硬件故障。如果是这种情况，请更换 NAS。

**如何在需要时获取技术支持？**

Network RADIUS SARL 自豪地提供最高质量的 FreeRADIUS 支持。Network RADIUS SARL 启动并维护 FreeRADIUS 协议，并编写大部分新的 RADIUS 规范。

有关 Network RADIUS SARL 支持包的更多信息，请访问：http://networkradius.com/support。下表简要描述了选项。

